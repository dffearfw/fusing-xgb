version: '3.8'

services:
  pytorch-app:
    build: .  # 使用当前目录的Dockerfile构建镜像
    container_name: my-pytorch-cuda-app  # 容器名称
    runtime: nvidia  # 使用NVIDIA GPU
    environment:
      - NVIDIA_VISIBLE_DEVICES=all  # 使用所有GPU
    volumes:
      - .:/workspace  # 把当前目录映射到容器内的/workspace
    working_dir: /workspace  # 设置工作目录
    stdin_open: true  # 保持标准输入打开
    tty: true  # 分配伪终端